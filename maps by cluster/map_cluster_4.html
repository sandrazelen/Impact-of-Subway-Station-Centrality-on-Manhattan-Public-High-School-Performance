<!DOCTYPE html>
<html>
<head>
    <title>NYC Subway Stations Map</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBdZqFGjwbO0op2NTHw0axO0AVNz6wnftI&libraries=visualization"></script>
    <script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js"></script>
    <script>
        function initMap() {
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 12,
                center: {lat: 40.7128, lng: -74.0060}
            });

            var subwayStations =  [{"name": "New Explorations into Science, Technology and Math High School - [HS] 01M539", "lat": 40.719783, "lng": -73.979245},{"name": "Bard High School Early College - [HS] 01M696", "lat": 40.7184646, "lng": -73.9758571},{"name": "The Clinton School - [HS] 02M260", "lat": 40.7362915, "lng": -73.9924468},{"name": "Urban Assembly Academy of Government and Law, The - [HS] 02M305", "lat": 40.717192, "lng": -73.989467},{"name": "High School for Environmental Studies - [HS] 02M400", "lat": 40.7679759, "lng": -73.9881796},{"name": "Eleanor Roosevelt High School - [HS] 02M416", "lat": 40.770284, "lng": -73.953281},{"name": "International High School at Union Square - [HS] 02M438", "lat": 40.7354677, "lng": -73.987393},{"name": "Vanguard High School - [HS] 02M449", "lat": 40.76536, "lng": -73.959737},{"name": "Talent Unlimited High School - [HS] 02M519", "lat": 40.76564, "lng": -73.959777},{"name": "Repertory Company High School for Theatre Arts - [HS] 02M531", "lat": 40.7561203, "lng": -73.9844558},{"name": "Union Square Academy for Health Sciences - [HS] 02M533", "lat": 40.7354911, "lng": -73.9874171},{"name": "New Design High School - [HS] 02M543", "lat": 40.7173452, "lng": -73.9892929},{"name": "Academy for Software Engineering - [HS] 02M546", "lat": 40.735543, "lng": -73.987478},{"name": "Richard R. Green High School of Teaching - [HS] 02M580", "lat": 40.7050989, "lng": -74.0128466},{"name": "The High School for Climate Justice - [HS] 02M655", "lat": 40.783409, "lng": -73.945859},{"name": "The Global Learning Collaborative - [HS] 03M403", "lat": 40.785992, "lng": -73.9743724},{"name": "Young Women's Leadership School - [HS] 03M610", "lat": 40.7971349, "lng": -73.9668867},{"name": "The Urban Assembly School for Global Commerce - [HS] 05M157", "lat": 40.806632, "lng": -73.938438},{"name": "Thurgood Marshall Academy for Learning and Social Change - [HS] 05M670", "lat": 40.8152484, "lng": -73.9443203},{"name": "High School for Mathematics, Science and Engineering at City College - [HS] 05M692", "lat": 40.8214739, "lng": -73.9490389},{"name": "City College Academy of the Arts - [HS] 06M293", "lat": 40.8608456, "lng": -73.9301494},{"name": "Community Health Academy of the Heights - [HS] 06M346", "lat": 40.833612, "lng": -73.942198},{"name": "Washington Heights Expeditionary Learning School - [HS] 06M348", "lat": 40.8491088, "lng": -73.9310992},{"name": "The College Academy - [HS] 06M462", "lat": 40.856121, "lng": -73.926333},{"name": "High School for Media and Communications - [HS] 06M463", "lat": 40.8561208, "lng": -73.9263326},{"name": "High School for Health Careers and Sciences - [HS] 06M468", "lat": 40.8558937, "lng": -73.9260333},{"name": "Gregorio Luperon High School for Science and Mathematics - [HS] 06M552", "lat": 40.8382264, "lng": -73.9385356}]
            var markers = subwayStations.map(function(station) {
                var marker = new google.maps.Marker({
                    position: {lat: station.lat, lng: station.lng},
                    title: station.name,
                    //icon: "https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png" // Optional custom icon
                });

                var infowindow = new google.maps.InfoWindow({
                    content: station.name
                });

                marker.addListener('click', function() {
                    infowindow.open(map, marker);
                });

                return marker;
            });

            //Marker Cluster
            var markerCluster = new MarkerClusterer(map, markers, {
                imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'
            });
        }
    </script>
</head>
<body onload="initMap()">
    <div id="map" style="height: 600px; width: 100%;"></div>
</body>
</html>

