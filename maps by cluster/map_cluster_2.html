<!DOCTYPE html>
<html>
<head>
    <title>NYC Subway Stations Map</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBdZqFGjwbO0op2NTHw0axO0AVNz6wnftI&libraries=visualization"></script>
    <script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js"></script>
    <script>
        function initMap() {
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 12,
                center: {lat: 40.7128, lng: -74.0060}
            });

            var subwayStations =  [{"name": "47 The American Sign Language and English Secondary School - [HS] 02M047", "lat": 40.7387769, "lng": -73.9814014},{"name": "The Urban Assembly School for Emergency Management - [HS] 02M135", "lat": 40.7112411, "lng": -74.0014423},{"name": "Urban Assembly Maker Academy - [HS] 02M282", "lat": 40.71134, "lng": -74.00165},{"name": "Pace High School - [HS] 02M298", "lat": 40.716194, "lng": -73.993385},{"name": "Lower Manhattan Arts Academy - [HS] 02M308", "lat": 40.7208595, "lng": -74.0006686},{"name": "Urban Assembly School of Business for Young Women, the - [HS] 02M316", "lat": 40.706554, "lng": -74.011877},{"name": "Business Of Sports School - [HS] 02M393", "lat": 40.7638592, "lng": -73.9903543},{"name": "Professional Performing Arts High School - [HS] 02M408", "lat": 40.761226, "lng": -73.9886092},{"name": "Baruch College Campus High School - [HS] 02M411", "lat": 40.7418485, "lng": -73.985909},{"name": "School of the Future High School - [HS] 02M413", "lat": 40.7390867, "lng": -73.9853658},{"name": "N.Y.C. Museum School - [HS] 02M414", "lat": 40.7424393, "lng": -74.0026597},{"name": "Millennium High School - [HS] 02M418", "lat": 40.70473, "lng": -74.011452},{"name": "Landmark High School - [HS] 02M419", "lat": 40.743136, "lng": -74.002519},{"name": "Quest to Learn - [HS] 02M422", "lat": 40.7431305, "lng": -74.0025192},{"name": "The High School of Fashion Industries - [HS] 02M600", "lat": 40.7454593, "lng": -73.9965165},{"name": "Chelsea Career and Technical Education High School - [HS] 02M615", "lat": 40.7246823, "lng": -74.0050859},{"name": "West End Secondary School - [HS] 03M291", "lat": 40.7726113, "lng": -73.988348},{"name": "Frank McCourt High School - [HS] 03M417", "lat": 40.785861, "lng": -73.9745414},{"name": "Manhattan / Hunter Science High School - [HS] 03M541", "lat": 40.7745619, "lng": -73.985282}]

            var markers = subwayStations.map(function(station) {
                var marker = new google.maps.Marker({
                    position: {lat: station.lat, lng: station.lng},
                    title: station.name,
                    //icon: "https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png" // Optional custom icon
                });

                var infowindow = new google.maps.InfoWindow({
                    content: station.name
                });

                marker.addListener('click', function() {
                    infowindow.open(map, marker);
                });

                return marker;
            });

            //Marker Cluster
            var markerCluster = new MarkerClusterer(map, markers, {
                imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'
            });
        }
    </script>
</head>
<body onload="initMap()">
    <div id="map" style="height: 600px; width: 100%;"></div>
</body>
</html>

